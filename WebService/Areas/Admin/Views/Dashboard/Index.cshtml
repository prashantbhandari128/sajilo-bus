@{
    ViewData["Title"] = "Dashboard";
}

<style>
    .card.widget-card:hover {
        transform: scale(1.02);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        cursor: crosshair;
    }
</style>

<div class="container-fluid">
    <h5 class="mb-4 text-uppercase" style="font-weight: 700; color: #4A4A4A;">@ViewData["Title"]</h5>
    <hr />
    <div class="row">
        <!-- Buses Card -->
        <div class="col-lg-3">
            <div class="card widget-card text-white mb-4 shadow-lg position-relative overflow-hidden" style="background: linear-gradient(135deg, #8e44ad 0%, #3498db 100%); border-radius: 15px; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div class="icon-container position-absolute" style="top: -10px; right: -10px; background-color: rgba(255,255,255,0.1); padding: 20px; border-radius: 50%;">
                        <i class="fas fa-bus fa-3x" style="color: rgba(255,255,255,0.6);"></i>
                    </div>
                    <div>
                        <h5 class="widget-title text-black">Buses</h5>
                        <p class="card-text fs-4" id="buses-counter"></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Routes Card -->
        <div class="col-lg-3">
            <div class="card widget-card text-white mb-4 shadow-lg position-relative overflow-hidden" style="background: linear-gradient(135deg, #1abc9c 0%, #16a085 100%); border-radius: 15px; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div class="icon-container position-absolute" style="top: -10px; right: -10px; background-color: rgba(255,255,255,0.1); padding: 20px; border-radius: 50%;">
                        <i class="fas fa-route fa-3x" style="color: rgba(255,255,255,0.6);"></i>
                    </div>
                    <div>
                        <h5 class="widget-title text-black">Routes</h5>
                        <p class="card-text fs-4" id="routes-counter"></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Tickets Sold Card -->
        <div class="col-lg-3">
            <div class="card widget-card text-white mb-4 shadow-lg position-relative overflow-hidden" style="background: linear-gradient(135deg, #f39c12 0%, #d35400 100%); border-radius: 15px; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div class="icon-container position-absolute" style="top: -10px; right: -10px; background-color: rgba(255,255,255,0.1); padding: 20px; border-radius: 50%;">
                        <i class="fas fa-ticket-alt fa-3x" style="color:rgba(255,255,255,0.6);"></i>
                    </div>
                    <div>
                        <h5 class="widget-title text-black">Tickets Sold</h5>
                        <p class="card-text fs-4" id="tickets-counter"></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Revenue Card -->
        <div class="col-lg-3">
            <div class="card widget-card text-white mb-4 shadow-lg position-relative overflow-hidden" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); border-radius: 15px; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div class="icon-container position-absolute" style="top: -10px; right: -10px; background-color: rgba(255,255,255,0.1); padding: 20px; border-radius: 50%;">
                        <i class="fa-solid fa-indian-rupee-sign fa-3x" style="color: rgba(255,255,255,0.6);"></i>
                    </div>
                    <div>
                        <h5 class="widget-title text-black">Revenue (Rs)</h5>
                        <p class="card-text fs-4" id="revenue-counter"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ApexCharts Section -->
    <div class="row">
        <div class="col-lg-6">
            <div class="card mb-4 shadow-lg position-relative overflow-hidden">
                <div class="card-body align-items-center justify-content-between">
                    <div id="chart1"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card mb-4 shadow-lg position-relative overflow-hidden">
                <div class="card-body align-items-center justify-content-between">
                    <div id="chart2"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="card mb-4 shadow-lg position-relative overflow-hidden">
                <div class="card-body align-items-center justify-content-between">
                    <div id="chart3"></div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card mb-4 shadow-lg position-relative overflow-hidden">
                <div class="card-body align-items-center justify-content-between">
                    <div id="chart4"></div>
                </div>
            </div>
        </div>
    </div>
    <partial name="Partial/Component/Footer" />
</div>

<script src="~/lib/apexcharts-bundle/dist/apexcharts.js"></script>

<script>

    // Counter animation script
    function animateCounter(id, start, end, duration) {
        const element = document.getElementById(id);
        let startTime = null;

        function updateCounter(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = Math.min((timestamp - startTime) / duration, 1);
            const value = Math.floor(progress * (end - start) + start);
            element.textContent = value;
            if (progress < 1) {
                requestAnimationFrame(updateCounter);
            }
        }
        requestAnimationFrame(updateCounter);
    }

    // ApexCharts Configurations
    var config1 = {
        chart: {
            type: 'line',
            height: 300
        },
        series: [{
            name: 'Ticket Sales',
            data: [500, 250, 476, 150, 800, 370, 950, 100, 1000]
        }],
        xaxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep']
        }
    };

    var config2 = {
        chart: {
            type: 'bar',
            height: 300
        },
        series: [{
            name: 'Revenue',
            data: [100, 2020, 350, 4000, 5000, 6000, 700, 80, 9000]
        }],
        xaxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep']
        }
    };

    var config3 = {
        chart: {
            type: 'pie',
            height: 300
        },
        series: [30, 40, 20, 10],
        labels: ['Route A', 'Route B', 'Route C', 'Route D']
    };

    var config4 = {
        chart: {
            type: 'radar',
            height: 300
        },
        series: [{
            name: 'Bus Efficiency',
            data: [80, 90, 70, 60, 85, 75]
        }],
        labels: ['Bus 1', 'Bus 2', 'Bus 3', 'Bus 4', 'Bus 5', 'Bus 6']
    };

    document.addEventListener('DOMContentLoaded', () => {

        animateCounter('buses-counter', 0, 100, 1500);
        animateCounter('routes-counter', 0, 200, 1500);
        animateCounter('tickets-counter', 0, 700, 1500);
        animateCounter('revenue-counter', 0, 2500, 1500);

        // Rendering the charts
        var chart1 = new ApexCharts(document.querySelector("#chart1"), config1);
        chart1.render();

        var chart2 = new ApexCharts(document.querySelector("#chart2"), config2);
        chart2.render();

        var chart3 = new ApexCharts(document.querySelector("#chart3"), config3);
        chart3.render();

        var chart4 = new ApexCharts(document.querySelector("#chart4"), config4);
        chart4.render();
    });

</script>
